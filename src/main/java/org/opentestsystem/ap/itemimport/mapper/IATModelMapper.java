package org.opentestsystem.ap.itemimport.mapper;

import lombok.extern.slf4j.Slf4j;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;
import org.opentestsystem.ap.common.model.Item;
import org.opentestsystem.ap.common.saaif.item.ItemRelease;
import org.opentestsystem.ap.common.saaif.metadata.SmarterAppMetadata;

@Slf4j
public abstract class IATModelMapper {
    abstract Item mapContent(Item item, ItemRelease release);
    abstract Item mapAttributes(Item item, ItemRelease release);

    public final Item mapSaaifToIATModel(Item item, ItemRelease release, SmarterAppMetadata metadata) {

        item = mapContent(item, release);
        item = mapAttributes(item, release);

        return item;
    }

    String updateTTSTags(String content) {
       final Document doc = Jsoup.parseBodyFragment(content);
       doc.outputSettings().syntax(Document.OutputSettings.Syntax.xml);

       //final Elements ttsTags = doc.getE

       return content;
    }

}
