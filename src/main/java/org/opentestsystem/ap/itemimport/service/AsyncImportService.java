package org.opentestsystem.ap.itemimport.service;

import lombok.extern.slf4j.Slf4j;
import org.opentestsystem.ap.common.saaif.mapper.model.ItemMappingResult;
import org.opentestsystem.ap.itemimport.handler.ItemImportHandler;
import org.opentestsystem.ap.itemimport.handler.WordlistImportHandler;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Component;

import java.util.concurrent.CompletableFuture;

@Slf4j
@Component
public class AsyncImportService {

    private final ItemImportHandler itemImportHandler;

    private final WordlistImportHandler wordlistImportHandler;

    public AsyncImportService(ItemImportHandler itemImportHandler,
                              WordlistImportHandler wordlistImportHandler) {
        this.itemImportHandler = itemImportHandler;
        this.wordlistImportHandler = wordlistImportHandler;
    }

    @Async
    public CompletableFuture<ItemMappingResult> importItemAsync(final String importData) {
        return CompletableFuture.completedFuture(itemImportHandler.importItem(importData));
    }

    @Async
    public CompletableFuture<ItemMappingResult> importWordlistAsync(final String importData) {
        return CompletableFuture.completedFuture(wordlistImportHandler.importWordlist(importData));
    }

}
