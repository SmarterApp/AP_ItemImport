package org.opentestsystem.ap.itemimport.service;

import lombok.extern.slf4j.Slf4j;
import org.opentestsystem.ap.itemimport.handler.ItemImportHandler;
import org.opentestsystem.ap.itemimport.model.report.ImportResult;
import org.springframework.scheduling.annotation.Async;
import org.springframework.stereotype.Component;

import java.util.concurrent.CompletableFuture;

@Slf4j
@Component
public class AsyncImportService {

    private final ItemImportHandler itemImportHandler;

    public AsyncImportService(ItemImportHandler itemImportHandler) {
      this.itemImportHandler = itemImportHandler;
    }

    @Async
    public CompletableFuture<ImportResult> migrateItemAsync(final String itemDirectory) {
        return CompletableFuture.completedFuture(itemImportHandler.importItem(itemDirectory));
    }

}
