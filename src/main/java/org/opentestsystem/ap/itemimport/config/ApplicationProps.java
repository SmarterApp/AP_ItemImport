package org.opentestsystem.ap.itemimport.config;

import lombok.Getter;
import lombok.Setter;
import org.opentestsystem.ap.common.security.model.ItemBankSystemUser;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

@Getter
@Setter
@Component
@ConfigurationProperties(prefix = "item-import")
public class ApplicationProps {

    /**
     * Main Import configuration flag
     */
    private boolean itemImportEnabled = true;

    /**
     * When set to true data will not be persisted. Full logs will be produced.
     */
    private boolean dryRun = true;

    /**
     * Environment where import will run
     */
    private String environment = "local";

    /**
     * The system username.
     */
    private String systemUsername = "item-import@smarterbalanced.org";

    /**
     * The system user full name.
     */
    private String systemFullname = "Item Import";

    /**
     * If true an existing item is first deleted then imported.  If false an existing item results in an error
     * when trying to import.
     */
    private boolean deleteIfExists = false;

    /**
     * Duration in seconds process will sleep after calling the item manager to delete an item
     * This is necessary since GitLab does not recognize a project being deleted unless
     * a few seconds have transpired after the call.
     */
    private int deleteSleepTimeout = 3;

    /**
     * If true only the item's import zip will be updated if the item exists already, false means
     * the item will be imported in the common way.
     */
    private boolean updateImportZipOnly = true;

    /**
     *
     */
    private String localBaseDir = "";

    /**
     * Required. Directory where item files will be read
     */
    private String itemSourceDir = "";

    /**
     * Required. Directory where stimuli files will be read
     */
    private String stimuliSourceDir = "";

    /**
     * Required. Directory where wordlist files will be read
     */
    private String wordlistSourceDir = "";

    /**
     * Required. Text file containing a list of item ids to be imported
     */
    private String importIdFile = "";

    /**
     * Optional. Text file containing a list if items to delete in Gitlab repository
     */
    private String gitlabDeleteIdFile = "";

    /**
     *
     */
    private String userRolesFile = "";
    /**
     *
     */
    private int numberOfThreads = 10;

    /**
     *
     */
    private boolean publishReportEnabled = true;

    /**
     *
     */
    private int randomRepoFolderCharLength = 10;

    /**
     * Location where report templates are kept.
     */
    private String reportTemplateFolder = "/report_templates";

    /**
     * The commit message used when committing an import report.
     */
    private String reportCommitMessage = "Adding import report";

    /**
     *
     */
    private String itemSaveMessage = "Item saved via import process";

    /**
     *
     */
    private String itemCreateMessage = "Item created via import process";

    /**
     *
     */
    private String importDefaultWorkflowStatus = "ParkingLot";

    /**
     * @return
     */
    public ItemBankSystemUser getSystemUser() {
        return new ItemBankSystemUser(systemUsername, systemFullname);
    }

}